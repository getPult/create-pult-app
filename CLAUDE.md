# create-pult-app — Project scaffolding CLI for Pult

Zero-install CLI to bootstrap new Pult projects. Runs via `npx create-pult-app`.
Interactive wizard: pick framework, add services (db, auth, redis, storage), get a ready-to-deploy project.

## Absolute Rules

1. **This is a PUBLIC repo.** Every character is visible to the world. Zero tolerance for secrets, internal URLs, credentials, API keys, or anything that leaks internal infrastructure details.
2. **No comments in code.** The code must be self-documenting. Variable names, function names, type names must be clear enough to never need a comment. If something needs a comment to be understood, the code is wrong — refactor it.
3. **No AI traces.** Never mention AI, Claude, Claude Code, Copilot, or any AI tool anywhere in the repo. No "Generated by", no "Co-Authored-By", no AI references in commits, code, docs, or config. Zero trace.
4. **Lead dev quality.** Every line of code must look like it was written by a senior engineer with 10+ years of experience. Clean, minimal, precise. No dead code, no unused imports, no TODO comments, no placeholder logic.
5. **Security first.** No secrets in code, no hardcoded URLs that leak infra, no eval(), no unsafe patterns.
6. **Commit and push at every action.** One file = one commit. Each created or modified file gets its own commit unless files are strictly inseparable (e.g. a module and its test for the same feature). Push after EVERY commit, not in batches. 20 small commits > 1 big commit. Maximize number of commits.
7. **PLAN.md in the main repo is the bible.** CLI design follows the architecture and conventions defined there.

## Conventional Commits — MANDATORY

Every commit message MUST follow the Conventional Commits spec:

```
<type>(<scope>): <description>
```

Types:
- `feat`: new feature or capability
- `fix`: bug fix
- `refactor`: code restructuring without behavior change
- `docs`: documentation only
- `test`: adding or fixing tests
- `chore`: build config, dependencies, CI, tooling
- `perf`: performance improvement
- `style`: formatting, whitespace, no code change

Scopes (optional): `cli`, `prompts`, `scaffold`, `templates`, `ci`

Examples:
- `feat(cli): add interactive framework selection`
- `feat(templates): add next.js with tailwind template`
- `fix(scaffold): handle spaces in project name`
- `chore: update clack to v0.8`
- `docs: add usage examples to README`

## Architecture

```
src/
├── index.ts          # CLI entry point, arg parsing, orchestration
├── prompts.ts        # Interactive wizard (framework, services, options)
├── scaffold.ts       # Project generation (copy templates, inject config)
├── templates.ts      # Template registry (framework + service combinations)
├── config.ts         # pult.yaml generation
└── utils.ts          # File system helpers, validation, formatting
```

### Templates Strategy

Templates are embedded in the package (not fetched remotely).
Each template is a directory under `templates/` with the base project structure.

Service modules (+db, +auth, +redis, +storage) are composable overlays applied on top of base framework templates.

### Supported Frameworks (Phase 1)
- Next.js (App Router + Tailwind)
- Remix
- Nuxt
- SvelteKit
- Astro
- Express
- Fastify
- Hono
- Go (net/http)
- Python (FastAPI)

### Composable Services
- `+db` — PostgreSQL client setup, schema file, env vars
- `+auth` — Auth client setup, middleware, login/signup pages
- `+redis` — Redis/Valkey client setup, env vars
- `+storage` — Storage client setup, upload helpers

## Code Conventions

- No `any` type. Use `unknown` and narrow.
- No `enum`. Use string literal unions.
- Prefer `interface` over `type` for object shapes.
- No barrel exports except from `index.ts`.
- File names: lowercase, single word (`prompts.ts`, `scaffold.ts`).
- Target: Node 18+ (CLI tool, no browser compat needed).
- Dependencies: minimal. Only @clack/prompts, picocolors, and fs-extra if needed.
